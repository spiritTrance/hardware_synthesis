# hardware_synthesis

- 替换step_into_mips_lab4_rtl下的文件

# 工作日志（？）

## 2023/1/1

- TODO：逻辑运算指令，把controller整合进datapath中
- 需要用到的资料：计组实验四的数据通路图，视频所给的参考代码，vivado下的README，硬综文档

错误记录：

1.在做逻辑移位运算时，修改后仿真波形图不能读取指令。经过排查，发现一个控制信号为高阻态Z，怀疑是某个地方未连线，于是按照连接逻辑添加波形，最后发现是一个触发器的flop在复位时就是高阻态，发现是触发器前面的可选参数位宽#()未更改，但ALU控制信号从计组的两位扩展到五位，导致没有连上。

## 2023/1/2

- 加入逻辑运算指令和移位指令（8+6）
- 看了HI和LO相关的数据移动指令，以及乘除法相关原理
- 将控制模块整合进datapath，mips模块相当于datapath的wrappper

错误记录：

在做算术移位时，使用>>>仍然没有做到有符号扩展。经过查阅资料，发现需要用系统函数$signed()表明相应数为有符号数。

## 2023/1/3

- 完成数据移位指令
  - 存在的疑问是，hiloreg前面的控制信号应该放在哪？这里采用的是E阶段的控制信号，原因是，如果用M的，那么相当于插了一级的流水线，时序可能出现问题，但不知道有没有bug，会不会是关键路径，先留着看看
